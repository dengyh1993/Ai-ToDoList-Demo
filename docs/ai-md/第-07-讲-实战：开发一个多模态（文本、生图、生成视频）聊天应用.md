大家好，我是拭心。

上一讲我们学习了[多模态大模型的基础知识和原理，知道了图片、音频、视频等不同模态的头部模型如何使用。](https://xiaobot.net/post/4d47fa3e-6873-4d7f-8fb2-356283da5dad)

这一讲我们来动手做一个多模态聊天应用，让用户可以**在一个对话框里实现文本聊天、图片生成和视频生成。**

效果预览：

![](https://static.xiaobot.net/file/2026-01-08/21332/40c8945ef70dc22eed1f42815fe2d969.jpeg!post)![](https://static.xiaobot.net/file/2026-01-08/21332/1d6c05d6530ede5f132d1ed2883aa04e.jpeg!post)![](https://static.xiaobot.net/file/2026-01-08/21332/371356f8c70584814fb58c6da3e803d1.jpeg!post)

## 一、认识 AI SDK

在开始做项目之前，我们先来认识一下 [Vercel AI SDK](https://vercel.com/docs/ai-sdk)——这是我们这个项目的核心框架。

为什么要用这个框架呢？

在《[第 05 讲 | API 避坑指南：如何像老手一样优雅地调用大模型](https://xiaobot.net/post/8200e18a-693b-4dbd-a414-0c16715a6fe4)》 的实战部分，我们让 AI 开发了一个简易的 AI 聊天页面：

![](https://static.xiaobot.net/file/2026-01-08/21332/888dad078a854bb96299a1ed0f223c08.png!post)

当时遇到了这些麻烦事：

-   需要手动处理 HTTP 请求
    
-   手动管理消息历史
    
-   手动处理流式响应（一个字一个字地返回）
    
-   手动管理加载状态和错误
    
-   手动处理文字重复
    

听起来就很累对吧？难道没有框架可以把这些工作都封装完成吗？

答案是：有的，AI SDK 就是干这个的！**使用 AI SDK，这些都不用我们操心，它全自动处理了，可以极大的简化 AI 应用开发 ！**

AI SDK 是 Vercel 开发的，它的官网是：[https://ai-sdk.dev/docs/introduction](https://ai-sdk.dev/docs/introduction) ，Github 链接是 [https://github.com/vercel/ai](https://github.com/vercel/ai)

![](https://static.xiaobot.net/file/2026-01-08/21332/dfe5f65690ed0687bde651e52ea8bf3f.png!post)

> Vercel 是一个专为前端开发者设计的云平台，通过它只需要创建 Git 项目、授权，就能实现项目的自动构建、部署、CDN 加速等。

**AI SDK 由三个部分组成（6.0版本）：**

1.  AI SDK UI：封装了一些在 React 页面中使用的前端 Hooks，比如 useChat useCompletion 等
    
2.  AI SDK Core：提供了一些在后端 API 中要使用的函数，比如 streamText 和 generateText
    
3.  AI SDK RSC：提供了服务端直接生成界面并返回的 API，目前还处于实验阶段
    

接下来我们来看看这个框架的核心功能怎么用，了解后再做项目更轻松。

## 二、AI SDK 核心功能

## 2.1 实现一个基本的聊天功能

使用 AI SDK 实现聊天功能，需要用到两个 API：

1.  前端的 useChat
    
2.  后端的 streamText
    

useChat 是最常用的一个 AI SDK 前端 API，它会帮我们做这些事：

-   保存对话历史
    
-   流式响应（打字机效果）
    
-   自动管理加载状态
    
-   自动处理错误
    

当我们做一个聊天机器人应用时，至少要实现这些功能：记住历史、流式输出、显示状态。这些都可以通过 useChat 解决。

代码示例：

```typescript
//从 @ai-sdk/react 中导入
import { useChat } from '@ai-sdk/react';
import { DefaultChatTransport } from 'ai';
function ChatDemo() {
  //在函数组件里使用
  const { messages, sendMessage, status } = useChat({
    transport: new DefaultChatTransport({
      api: '/api/ai-sdk/chat',  // 后端 API 地址
    }),
  });
  // useChat 调用后返回值解释：
  // messages 就是所有的对话历史
  // status 告诉你当前状态：'ready' | 'submitted' | 'streaming'
  // sendMessage 用来发送消息
}
```

就上面这几行代码，就实现了聊天界面的消息管理、状态管理，简单吧！

> 由于 useChat 是一个 [React Hooks](https://zh-hans.legacy.reactjs.org/docs/hooks-intro.html)，所以需要在 [React 函数组件](https://zh-hans.legacy.reactjs.org/docs/components-and-props.html)里使用，不了解这两个概念的朋友可以点击链接看文档或者问一下 AI。 如果实在不懂也没关系，记住 API 名字就行，交给 AI 去写。

使用 useChat 实现前端的消息接收和发送后，接下来我们看看后端怎么处理请求。

后端要使用 streamText 这个 API 向模型发送请求：

```typescript
import { streamText } from 'ai';
import { deepseek } from '@/lib/ai/models';
export default async function handler(req: Request) {
  const { messages } = await req.json();
  //向大模型发起请求
  const result = await streamText({
    model: deepseek,           // 使用哪个 AI 模型
    messages: modelMessages,   // 对话历史
    system: '你是一个友好的 AI 助手...',  // 系统提示词
  });
  //转换为 useChat 需要的格式
  return result.toUIMessageStreamResponse();
}
```

上面是一个典型的 Next.js 后端接口函数，在这个函数里使用了 streamText 向模型发送请求，并且把结果转换为 useChact 需要的流式的结构，这样前端就能实现打字机那样一个字一个字显示的效果。

当用户输入后，前后端代码的执行流程是这样：

![](https://static.xiaobot.net/file/2026-01-08/21332/e299f5f062cadd515d304660ed6411d6.png!post)

> 用户输入 → 前端执行 sendMessage() → 后端 streamText() → AI 模型 → 流式返回 → 前端的 messages 自动更新 -> 刷新 UI 展示消息

上面的代码里还有一个很关键的细节需要介绍，是这一行：

```dts
model: deepseek, // 使用哪个 AI 模型，通过创建 provider 提供
```

当我们在访问不同的大模型 API 时，需要处理不同的参数和返回值格式。为了简化这个，AI SDK Core 提供了一种标准化的大模型交互方法，它叫 Provider（提供商）。

![](https://static.xiaobot.net/file/2026-01-08/21332/67d1fc1724fb7d29541b5eab070cebe9.png!post)

使用了 Provider 以后，我们在更换模型时只需要修改一个文件即可，不需要修改所有用到的地方。

AI SDK 提供了众多具体的模型 Provider（国内主要使用 OpenAI 兼容的格式为主）:

-   xAI Grok Provider  ( @ai-sdk/xai )
    
-   OpenAI Provider  ( @ai-sdk/openai )
    
-   Azure OpenAI Provider  ( @ai-sdk/azure )
    
-   Anthropic Provider  ( @ai-sdk/anthropic )
    
-   Google Generative AI Provider  ( @ai-sdk/google )
    

这里用到的 deepseek provider 长这样：

```dts
model: deepseek, // 使用哪个 AI 模型，通过创建 provider 提供
```

```none
import { createOpenAI } from '@ai-sdk/openai';
export const deepseek = createOpenAI({
  apiKey: process.env.DEEPSEEK_API_KEY,
  baseURL: 'https://sg.uiuiapi.com/v1',
}).chat('deepseek-v3');
```

## 2.2 单次对话或者文本补全

除了多轮对话，还有一种场景是不需要保留历史的，比如我们写代码时的代码自动补全，这时会有一次单次的输入输出，AI SDK 为这个场景提供了 useCompletion 这个 API。

和 \`useChat\` 的区别在于：\`useChat\` 会记住之前的对话，而 \`useCompletion\` 每次都是独立的，不会记住之前的内容。

两者的区别：

![](https://static.xiaobot.net/file/2026-01-08/21332/1aae0deeac61adf61f089bedc2608595.png!post)

**useCompletion 的使用场景**：

-   文本生成（写诗、写文章）
    
-   代码补全
    
-   单次问答（不需要上下文）
    

## 2.3 工具调用（Tools）

工具调用也是一个很重要的功能。当我们需要让 AI 调用外部函数时，可以封装一个工具提供给它。比如获取天气、生成图片、生成视频等。

> 这种工具调用其实就是 Function Call，它是一个比较重要的大模型特性，后面介绍到 Agent 时会重点介绍，这里先知道这种工具调用就是 function call 即可。

工具调用让 AI 不再只是一个"聊天机器人"，而是一个可以执行实际操作的"助手"。我们等下要实现的画图功能，就需要用到工具调用这个功能，大概的流程：

```none
用户："帮我画一只可爱的小猫"
  ↓
AI 识别：用户想生成图片 → 调用 generateImage 工具
  ↓
工具执行：调用图片生成模型，返回图片 URL
  ↓
AI 回复：展示生成的图片
```

流程里最关键的就是**向 AI 声明我们有生成图片的这个工具**，对应的代码示例：

```typescript
import { tool } from 'ai';
import { z } from 'zod';
// 定义一个工具
const generateImage = tool({
  description: '根据用户描述生成图片',  // AI 用这个描述来判断是否需要调用
  inputSchema: z.object({
    prompt: z.string().describe('图片描述'),
  }),
  execute: async ({ prompt }) => {
    // 调用图片生成 API
    const imageUrl = await callImageAPI(prompt);
    return { success: true, imageUrl };
  },
});
// 在 streamText 中使用
const result = await streamText({
  model: deepseek,
  messages: modelMessages,
  tools: {
    generateImage,  // 注册工具
  },
});
```

正如上面的代码所示，**工具调用的核心步骤：**

1.  **定义工具**：告诉 AI "我有这个工具，它能做什么"
    
2.  **AI 自动决策**：AI 根据用户输入，自动判断是否需要调用工具
    
3.  **执行并返回**：工具执行后，结果返回给 AI，AI 生成最终回复
    

工具调用是我们实现多模态聊天的核心技术，通过它，AI 可以根据用户的意图，自动调用图片生成、视频生成等功能。

> 这三个核心功能的完整代码已上传到 https://github.com/shixinzhang/AI-TODO/components/AISDKDemo.tsx ，感兴趣的朋友可以拉代码跑一遍、看一遍，最好自己手动再敲一遍。

## 三、多模态聊天应用设计

了解 AI SDK 的核心功能后，接下来我们进入实战环节——做一个多模态聊天应用。

我们日常使用的 ChatGPT、Gemini、Deepseek、豆包、元宝等聊天软件，都是多模态的，他们大都支持文本聊天、图片生成，少数也支持视频生成。

今天我们就来做一个简单但强大的多模态聊天助手，**所有模态（文本、图片、视频）都在同一个聊天界面中展示，并且支持实时流式输出，同时也不需要手动切换模式**，AI 自动识别想聊天还是想生成图片。

## 3.1 功能设计

需求明确后，接下来我们看看具体要实现的功能。这个聊天软件需要实现三个核心功能：

**1）文本聊天：**

最基础的功能，就是让用户能和 AI 正常聊天，需要实现：

-   支持多轮对话，自动保存历史（不能聊几句就忘了之前说的话）
    
-   流式响应，打字机效果（让用户知道 AI 在"思考"）
    
-   自动管理加载状态和错误处理
    
-   支持系统提示词自定义
    

**2）图片生成：**

当用户说"帮我画一张..."的时候，AI 要能自动识别并生成图片。

**触发条件：**

-   用户说"生成图片"、"画一张"、"帮我生成一张图"等
    
-   或者明确说"生成图片，内容是 XXXX"
    

**具体功能：**

-   调用 Nano Banana Pro 模型（也叫 gemini-3-pro-image-preview）生成手绘风格的图片
    
-   在聊天界面中展示生成的图片
    
-   支持操作：点击放大、复制、下载到本地
    

**3）视频生成：**

同样，当用户说"帮我做一个视频..."的时候，AI 要能自动识别并生成视频：

**触发条件：**

-   用户说"生成视频"、"做一个视频"、"帮我生成一个视频"等
    
-   或者明确说"生成视频，内容是 XXXX"
    

**具体功能：**

-   调用豆包 Seedance 1.5 Pro 模型生成视频
    
-   在聊天界面中展示生成的视频
    
-   支持视频操作：全屏播放、暂停、快进、下载到本地
    

需求清晰后，接下我们简单设计一下技术方案。

## 3.2 技术方案

我们选择的技术栈：

![](https://static.xiaobot.net/file/2026-01-08/21332/614ac6add87c5159e3227a3a88583917.png!post)

整个系统的技术架构：

![](https://static.xiaobot.net/file/2026-01-08/21332/835690005616ffa3fe99a1c29048e1bd.png!post)

简单来说，数据流是这样的：

```none
用户输入 → 前端 useChat → 后端 API → 意图识别 → 调用对应模型 → 流式返回 → 前端渲染
```

整个流程有点像我们日常打 400 客服，收到电话，总机先判断你要干嘛（意图识别），是要聊天还是要画图，然后把你转接到对应的"分机"（不同的 AI 模型）。

好，架构清楚了，接下来进入开发环节。

## 四、多模态聊天应用开发

接下来我会详细讲解每个功能的实现方式，大家可以先看一遍，然后跟着敲一遍。

## 4.1 基础准备

在开始编码之前，我们需要先安装项目所需的依赖包。

打开终端，在项目根目录执行以下命令：

```bash
# 安装核心依赖
npm install ai @ai-sdk/react @ai-sdk/openai
# 安装 Next.js 和 React（如果还没有安装）
npm install next react react-dom
# 安装其他必要的依赖
npm install zod 
# 安装开发依赖（TypeScript 类型定义）
npm install -D @types/node @types/react @types/react-dom typescript
```

**这些依赖的作用：**

-   ai: AI SDK 核心库，提供 streamText、generateText 等后端 API
    
-   @ai-sdk/react: React Hooks，提供 useChat、useCompletion 等前端 API
    
-   @ai-sdk/openai: OpenAI 模型提供者（可选，如果使用 OpenAI 模型）
    
-   next: Next.js 框架
    
-   react / react-dom: React 库
    
-   zod: 用于数据验证和类型安全
    

安装完成后，我们就可以开始编写代码了！

我们先来实现一个基础的聊天页面结构。

![](https://static.xiaobot.net/file/2026-01-08/21332/0f78d329d003be60d294f818c565faf3.png!post)

这个版本只包含：

-   输入框
    
-   发送按钮
    
-   基本的页面布局
    

前端代码（[components/MultimodalChat.tsx](https://github.com/shixinzhang/AI-TODO/blob/main/components/MultimodalChat.tsx)）：

![](https://static.xiaobot.net/file/2026-01-08/21332/f6cc644fd48daf9df06dc278d8d24275.png!post)

解释下上面的代码：

-   MultimodalChat 是一个函数组件（不熟悉 React 的朋友可以看下这个文档浅浅认识一下：https://zh-hans.legacy.reactjs.org/docs/components-and-props.html）。
    
-   useState 用来管理输入框的值 ，当 state 变化时 UI 自动更新（不了解 React Hooks 的朋友看这里：https://zh-hans.legacy.reactjs.org/docs/hooks-intro.html）：
    
    -   input：当前输入框的内容
        
    -   setInput：更新输入框内容的函数
        
-   handleSubmit 表单提交：目前只是打印到控制台，后续会添加实际的发送逻辑
    
-   return 函数里的页面布局：包含标题、消息列表区域（暂时为空）和输入区域
    

这就实现了基础的页面结构。接下来我们添加发送消息、调用大模型和消息列表的显示功能。

## 4.2 实现文本聊天

我们用 Vercel AI SDK 的 \`useChat\` Hook 和 \`streamText\` 函数实现和文本大模型聊天。

再复习一遍，**useChat 可以自动完成这些：**

-   管理消息列表（用户消息、AI 消息）
    
-   处理流式响应（SSE 或 WebSocket）
    
-   管理加载状态
    
-   处理错误和重试
    

### 4.2.1 前端支持展示聊天

现在我们在之前的基础页面上添加 \`useChat\` Hook 和消息列表显示功能：

![](https://static.xiaobot.net/file/2026-01-08/21332/236fb2d51e7c8f2c9e9c10372e1be8bb.png!post)

在上一节的基础上，我们新增了这些代码：

1\. useChat：这是核心，它自动管理了所有聊天相关的状态和逻辑

-   messages：包含所有对话历史的数组，每个消息对象包含 \`id\`、\`role\`（'user' 或 'assistant'）、\`parts\` 或 \`content\` 等字段
    
-   sendMessage：发送消息的函数，调用后会自动将消息添加到 \`messages\` 数组中
    
-   status：当前状态，可以是 \`'ready'\`（就绪）、\`'submitted'\`（已提交）、\`'streaming'\`（流式传输中）
    

2\. 消息列表渲染：

-   使用 \`messages.map()\` 遍历所有消息
    
-   用户消息（\`message.role === 'user'\`）显示在右侧，蓝色背景
    
-   AI 消息显示在左侧，灰色背景
    
-   从 \`message.parts\`（数组格式）或 \`message.content\`（字符串格式）中提取文本内容
    

![](https://static.xiaobot.net/file/2026-01-08/21332/e82921ce47acd3c676b54521950d832a.png!post)

3\. 加载状态：当 \`status\` 为 \`'submitted'\` 或 \`'streaming'\` 时，显示"正在思考..."提示，并禁用输入框和发送按钮

### 4.2.2 后端发送消息给大模型并返回前端

前端发送消息后，后端怎么处理的呢？我们来看一下后端接口（[pages/api/ai-sdk/multimodal.ts](https://github.com/shixinzhang/AI-TODO/blob/main/pages/api/ai-sdk/multimodal.ts)）文件中的关键代码。

**首先讲下后端 API 的处理流程：**

1.  接收前端请求：前端通过 \`useChat\` 发送 POST 请求到 \`/api/ai-sdk/multimodal\`
    
2.  消息格式转换：后端接口将前端传来的 UI 消息格式转换为模型需要的格式
    
3.  调用大模型：然后使用 \`streamText\` 调用大模型生成回复
    
4.  流式返回：最后将结果转换为流式响应返回给前端
    

了解流程后，接下来实现这个流程。

**第一步先配置文本模型：**

```none
// lib/ai/models.ts
import { createOpenAI } from '@ai-sdk/openai';
export const deepseek = createOpenAI({
  apiKey: process.env.DEEPSEEK_API_KEY,
  baseURL: 'https://sg.uiuiapi.com/v1',
}).chat('doubao-seed-1-6-250615');
```

这里 baseURL 我们使用前面提到的的 [UIUI API 平台](https://sg.uiuiapi.com/console)（开发前先去注册、创建 API key），模型用 doubao-seed-1-6-250615。

然后实现消息处理相关的代码（[pages/api/ai-sdk/multimodal.ts](https://github.com/shixinzhang/AI-TODO/blob/main/pages/api/ai-sdk/multimodal.ts)）：

![](https://static.xiaobot.net/file/2026-01-08/21332/8f4b944070249912c56d987902f2ad1e.png!post)

解释一下上面的代码：

1\. Edge Runtime：\`export const config = { runtime: 'edge' }\` 表示使用边缘运行时，响应更快

2\. 消息格式转换：

-   前端 \`useChat\` 发送的是 \`UIMessage\` 格式（包含 \`parts\` 数组）
    
-   模型需要的是简单的 \`{ role, content }\` 格式
    
-   因此需要从 \`parts\` 中提取文本内容并转换格式
    

3\. streamText 函数：

-   \`model\`：指定使用哪个大模型（这里是 \`deepseek\`）
    
-   \`messages\`：对话历史（转换后的格式）
    
-   \`system\`：系统提示词，定义 AI 的角色和行为
    

4\. toUIMessageStreamResponse()：

-   这是关键！它将流式响应转换为前端 \`useChat\` 能识别的格式
    
-   前端会自动接收并更新 \`messages\` 数组
    

通过前后端这两部分代码，就实现了大模型对话、流式输出、状态管理。

怎么样，是不是比自己写简单多了？这就是用框架的好处。只需要几行代码就能实现完整的流式聊天功能！

## 4.3 实现图片生成

接下来我们做图片生成，要用到前面提的 AI SDK Tools（工具）。

简单来说**，Tools 就是给 AI 装上"手"。以前的 AI 只能"动嘴"（生成文本），有了 Tools 之后，AI 可以"动手"——调用外部功能，比如生成图片、搜索网页等。**

图片生成的实现思路：

1.  后端定义一个 \`generateImage\` 工具，告诉 AI 这个工具是干嘛的
    
2.  当用户说"帮我画一张..."，AI 自动识别意图，调用这个工具
    
3.  工具内部调用图片生成模型生成图片
    
4.  前端接收工具调用结果，显示图片
    

### 4.3.1 前端实现显示图片

前端需要从消息中提取图片并显示。我们在 \`renderMessageContent\` 函数中添加图片处理逻辑：

![](https://static.xiaobot.net/file/2026-01-08/21332/3a8aa641b55464fb2ed37e1023a13395.png!post)

在上面的代码里，有这些关键点：

1\. isToolUIPart 和 getToolName：

是 AI SDK 提供的工具函数，用于判断是否是工具调用并获取工具名称

2\. 工具状态判断：

-   part.state === 'output-available'：工具执行完成，有输出
    
-   part.state === 'input-streaming'\`或 input-available'：工具还在执行中
    

3\. 图片显示：

-   从 \`part.output\` 中获取 \`imageUrl\`
    
-   使用 \`\` 标签显示图片
    
-   提供复制和下载功能
    

### 4.3.2 后端定义图片生成工具

还是先配置模型， 这里我们使用 'gemini-3-pro-image-preview'，也就是 nano banana pro：

```typescript
// lib/ai/models.ts
import { createOpenAI } from '@ai-sdk/openai';
export const nanobanana = createOpenAI({
  apiKey: process.env.DEEPSEEK_API_KEY,
  baseURL: 'https://sg.uiuiapi.com/v1',
}).chat('gemini-3-pro-image-preview');
```

然后定义图片生成工具，并在 streamText 中注册这个工具：

![](https://static.xiaobot.net/file/2026-01-08/21332/1edb8d8046e477056460790f22a62859.png!post)

解释下上图中的代码：

1\. tool() 函数：用于定义工具

-   \`description\`：工具描述，告诉 AI 什么时候使用这个工具
    
-   \`inputSchema\`：使用 \`zod\` 定义输入参数的类型和验证规则
    
    -   \`z.object({ ... })\`：定义一个对象结构，包含多个字段
        
    -   \`z.string()\`：定义字段类型为字符串
        
    -   \`.min(1, '提示词不能为空')\`：设置最小长度为 1，如果为空会返回错误信息
        
    -   \`.max(500, '提示词长度不能超过500个字符')\`：设置最大长度为 500，超过会返回错误信息
        
    -   \`.describe('图片生成提示词')\`：给 AI 提供参数说明，帮助 AI 理解这个参数的作用
        
-   \`execute\`：工具执行函数，实际执行图片生成逻辑，接收的参数就是 \`inputSchema\` 定义的结构
    
    -   使用 generateText 调用 nano banana 生成图片
        

2\. 图片生成结果获取：

-   优先从 \`result.files\` 中获取（AI SDK 标准方式）
    
-   如果 \`files\` 为空，从 \`result.text\` 中提取 base64 图片 URL
    

3\. 工具注册：在 \`streamText\` 的 \`tools\` 参数中注册工具，AI 会自动识别何时调用

通过这两部分代码，就实现了图片生成功能，当用户说"帮我画一张..."时，AI 自动调用工具生成图片，然后前端自动显示图片。

### 4.3.3 图片生成详细执行流程

接下来我们通过一个具体的例子，串一下整个流程，加深大家的理解。

当用户输入 "给我生成一张海边晒太阳的照片" 后，代码执行流程如下图所示，包括流式响应的每个阶段（看不清的话下载到本地打开，非常全面，看完可以对整个流程有深入的理解）：

![](https://static.xiaobot.net/file/2026-01-08/21332/1513c49de0ee07f943063986278aece2.png!post)

**前端发起图片生成请求后，后端接口流式响应的数据格式会有如下几个阶段：**

1\. 开始阶段

```javascript
data: {"type":"start"}
data: {"type":"start-step"}
```

2\. 文本部分

```javascript
data: {"type":"text-start","id":"0"}
data: {"type":"text-end","id":"0"}
```

3\. 工具调用 - 输入阶段（流式）

```javascript
data: {"type":"tool-input-start","toolCallId":"call_xxx","toolName":"generateImage"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"{\""}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"prompt"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"\":\""}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"海边"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"晒太阳"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"的"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"场景"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"\"}"}
data: {"type":"tool-input-available","toolCallId":"call_xxx","toolName":"generateImage","input":{"prompt":"海边晒太阳的场景"}}
```

4\. 工具调用 - 输出阶段

```javascript
data: {"type":"tool-output-available","toolCallId":"call_xxx","output":{"success":true,"imageUrl":"data:image/png;base64,iVBO..."}}
```

5\. 完成阶段

```javascript
data: {"type":"finish-step"}
data: {"type":"finish","finishReason":"tool-calls"}
data: [DONE]
```

**前端收到的消息变化：**

1\. 初始状态（用户消息发送后）

```javascript
messages = [
  { id: 'user_xxx', role: 'user', parts: [{ type: 'text', text: '给我生成一张海边晒太阳的照片' }] }
]
```

2\. 流式响应开始（接收到 \`start\` 事件）

```javascript
messages = [
  { id: 'user_xxx', role: 'user', ... },
  { id: 'assistant_xxx', role: 'assistant', parts: [] }  // 新建 assistant 消息
]
```

3\. 文本部分开始（接收到 \`text-start\`）

```javascript
messages = [
  ...,
  { id: 'assistant_xxx', role: 'assistant', parts: [{ type: 'text', text: '', id: '0' }] }
]
```

4\. 工具调用开始（接收到 \`tool-input-start\`）

```javascript
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call', 
        toolName: 'generateImage',
        toolCallId: 'call_xxx',
        state: 'input-streaming',  // 正在接收参数
        input: undefined,
        output: undefined
      }
    ]
  }
]
```

5\. 参数接收中（多次 \`tool-input-delta\`）

```javascript
// 每次 delta 都会触发重新渲染
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateImage',
        state: 'input-streaming',
        input: '{"prompt":"海边"'  // 逐步拼接
      }
    ]
  }
]
// 前端日志: console.log('工具调用 part: input-streaming')
```

6\. 参数接收完成（接收到 \`tool-input-available\`）

```javascript
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateImage',
        state: 'input-available',  // 参数完整
        input: { prompt: '海边晒太阳的场景' },
        output: undefined
      }
    ]
  }
]
```

7\. 工具执行完成（接收到 \`tool-output-available\`）

```javascript
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateImage',
        toolCallId: 'call_xxx',
        state: 'output-available',  // 输出可用
        input: { prompt: '海边晒太阳的场景' },
        output: {   // 注意：工具结果存储在 output 中，不是 result
          success: true, 
          imageUrl: 'data:image/png;base64,iVBO...' 
        }
      }
    ]
  }
]
// 前端日志: console.log('工具调用 part: output-available')
// 前端渲染: <img src={part.output.imageUrl} />  // 使用 part.output 访问结果
```

**关键代码执行点**

生图部分的完整代码上传到了 GitHub，大家要看的时候看这些关键点。

**前端：**[https://github.com/shixinzhang/AI-TODO/blob/main/components/MultimodalChat.tsx](https://github.com/shixinzhang/AI-TODO/blob/main/components/MultimodalChat.tsx)

1.  \`handleSubmit()\` 处理用户提交
    
2.  \`sendMessage()\` 发送消息
    
3.  \`useChat()\` Hook 管理状态和流式响应
    
4.  \`useEffect\` 监听 messages 变化，打印调试日志
    
5.  \`renderMessageContent()\` 渲染消息内容
    
6.  检查工具调用 part，打印状态日志
    
7.  处理 \`generateImage\` 工具调用
    
8.  检查 \`state === 'output-available'\` 渲染图片
    

后端：[https://github.com/shixinzhang/AI-TODO/blob/main/pages/api/ai-sdk/multimodal.ts](https://github.com/shixinzhang/AI-TODO/blob/main/pages/api/ai-sdk/multimodal.ts)

1.  handler() 处理 POST 请求
    
2.  解析和转换消息格式
    
3.  \`streamText()\` 调用 AI 模型
    
4.  \`generateImage.execute()\` 执行图片生成
    
5.  \`generateText()\` 调用图片生成模型
    
6.  从 \`result.files\` 提取图片或从 \`result.text\` 匹配 Base64/HTTP URL
    
7.  toUIMessageStreamResponse()\` 转换为流式响应格式
    

## 4.4 实现视频生成

接下来到我们的最后一个模块：视频生成。实现方式和图片生成类似，也是使用 Tools 功能 + 视频生成模型。

实现思路：

1.  后端定义一个 \`generateVideo\` 工具，告诉 AI 这个工具是干嘛的
    
2.  当用户说"帮我做一个视频..."，AI 自动识别意图，调用这个工具
    
3.  工具内部使用豆包 Seedance 模型 API 生成视频（采用异步任务模式）
    
4.  前端接收工具调用结果，显示视频
    

### 4.4.1 前端实现显示视频

前端需要从消息中提取视频并显示。我们在 \`renderMessageContent\` 函数中添加视频处理逻辑：

![](https://static.xiaobot.net/file/2026-01-08/21332/3b07eb08907e1878a329532240be28be.png!post)

在上面的代码里，有这些关键点：

1\. 工具状态判断：

-   \`part.state === 'output-available'\`：工具执行完成，有输出
    
-   \`part.state === 'input-streaming'\` 或 \`'input-available'\`：工具还在执行中
    

2\. 视频显示：

-   从 \`part.output\` 中获取 \`videoUrl\`
    
-   使用 \`<video>\` 标签显示视频，并添加 \`controls\` 属性支持播放控制
    
-   提供放大查看和下载功能
    

### 4.4.2 后端定义视频生成工具

首先配置相关参数（UIUI 的 Veo3 等视频模型最近总报错，所以我们使用豆包视频生成模型，调用方式和图片生成不一样）：

```typescript
// lib/config.ts
export const VIDEO_GENERATION_METHOD = process.env.VIDEO_GENERATION_METHOD || 'doubao';
export const DOUBAO_API_BASE_URL = process.env.DOUBAO_API_BASE_URL || 'https://ark.cn-beijing.volces.com';
export const DOUBAO_API_TOKEN = process.env.DOUBAO_API_TOKEN || '';
export const DOUBAO_VIDEO_MODEL = process.env.DOUBAO_VIDEO_MODEL || 'doubao-seedance-1-5-pro-251215';
```

为了运行成功，你需要[注册火山方舟](https://console.volcengine.com/ark/region:ark+cn-beijing/model/detail?Id=doubao-seedance-1-5-pro)，并生成一个你自己的 Key。

![](https://static.xiaobot.net/file/2026-01-08/21332/08cbe8f6174260775fbc6ad1d4b84b92.png!post)

然后定义视频生成工具，并在 \`streamText\` 中注册这个工具：

![](https://static.xiaobot.net/file/2026-01-08/21332/7b68602848097d480b061f169fb62cb0.png!post)

解释一下上图中的代码：

1\. 异步任务模式：

-   视频生成需要较长时间（几十秒到几分钟），豆包 API 采用异步任务模式
    
-   第1步：创建任务，获取 \`taskId\`
    
-   第2步：轮询查询任务状态，直到完成或失败
    

2\. 轮询机制：

-   最多轮询 60 次，每次间隔 2 秒（最多等待 2 分钟）
    
-   根据任务状态决定继续等待、返回成功或返回失败
    

3\. 工具注册：在 \`streamText\` 的 \`tools\` 参数中注册工具，AI 会自动识别何时调用

通过前后端这两部分的代码，我们就实现了视频生成功能，当用户说"帮我做一个视频..."后，AI 自动调用工具生成视频。

### 4.4.3 视频生成详细流程

接下来我们通过一个具体的例子，串一下整个流程，加深大家的理解。

![](https://static.xiaobot.net/file/2026-01-08/21332/ba16df90bb2fb9b2df08045c26e4f2b2.png!post)

当用户输入 "帮我生成一个视频，内容是海浪拍打海岸的场景" 后，代码执行流程如下图所示，包括流式响应的每个阶段（看不清右键下载后查看）：

![](data:image/svg+xml;utf8,%3Csvg%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20aria-roledescription%3D%22sequence%22%20role%3D%22graphics-document%20document%22%20viewBox%3D%22-50%20-10%202776%206983%22%20style%3D%22max-width%3A%202776px%3B%22%20width%3D%222776%22%20id%3D%22text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%22%20height%3D%226983%22%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22DoubaoAPI%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%222525%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%222600%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%222600%22%3E%E8%B1%86%E5%8C%85%20API%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%222600%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%222600%22%3E(%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22Tool%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%222081%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%222156%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%222156%22%3EgenerateVideo%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%222156%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%222156%22%3E(%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22AI%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%221881%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%221956%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%221956%22%3EAI%20%E6%A8%A1%E5%9E%8B%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%221956%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%221956%22%3E(DeepSeek)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22StreamText%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%221513%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%221588%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%221588%22%3EstreamText%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%221588%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%221588%22%3E(AI%20SDK)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22API%22%20height%3D%2265%22%20width%3D%22189%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%221141.5%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%221236%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%221236%22%3E%E5%90%8E%E7%AB%AF%20API%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%221236%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%221236%22%3E(%2Fapi%2Fai-sdk%2Fmultimodal)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22Transport%22%20height%3D%2265%22%20width%3D%22181%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%22795.5%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%22886%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%22886%22%3ETransport%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%22886%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%22886%22%3E(DefaultChatTransport)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22Frontend%22%20height%3D%2265%22%20width%3D%22168%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%22452%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%22536%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%22536%22%3E%E5%89%8D%E7%AB%AF%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%22536%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%22536%22%3E(MultimodalChat.tsx)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22actor%20actor-bottom%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22User%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%226897%22%20x%3D%220%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%226929.5%22%20x%3D%2275%22%3E%3Ctspan%20dy%3D%220%22%20x%3D%2275%22%3E%E7%94%A8%E6%88%B7%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%222600%22%20y1%3D%225%22%20x1%3D%222600%22%20id%3D%22actor15%22%2F%3E%3Cg%20id%3D%22root-15%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22DoubaoAPI%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%222525%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%222600%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%222600%22%3E%E8%B1%86%E5%8C%85%20API%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%222600%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%222600%22%3E(%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%222156%22%20y1%3D%225%22%20x1%3D%222156%22%20id%3D%22actor14%22%2F%3E%3Cg%20id%3D%22root-14%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22Tool%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%222081%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%222156%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%222156%22%3EgenerateVideo%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%222156%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%222156%22%3E(%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%221956%22%20y1%3D%225%22%20x1%3D%221956%22%20id%3D%22actor13%22%2F%3E%3Cg%20id%3D%22root-13%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22AI%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%221881%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%221956%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%221956%22%3EAI%20%E6%A8%A1%E5%9E%8B%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%221956%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%221956%22%3E(DeepSeek)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%221588%22%20y1%3D%225%22%20x1%3D%221588%22%20id%3D%22actor12%22%2F%3E%3Cg%20id%3D%22root-12%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22StreamText%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%221513%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%221588%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%221588%22%3EstreamText%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%221588%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%221588%22%3E(AI%20SDK)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%221236%22%20y1%3D%225%22%20x1%3D%221236%22%20id%3D%22actor11%22%2F%3E%3Cg%20id%3D%22root-11%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22API%22%20height%3D%2265%22%20width%3D%22189%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%221141.5%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%221236%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%221236%22%3E%E5%90%8E%E7%AB%AF%20API%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%221236%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%221236%22%3E(%2Fapi%2Fai-sdk%2Fmultimodal)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%22886%22%20y1%3D%225%22%20x1%3D%22886%22%20id%3D%22actor10%22%2F%3E%3Cg%20id%3D%22root-10%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22Transport%22%20height%3D%2265%22%20width%3D%22181%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%22795.5%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%22886%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%22886%22%3ETransport%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%22886%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%22886%22%3E(DefaultChatTransport)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%22536%22%20y1%3D%225%22%20x1%3D%22536%22%20id%3D%22actor9%22%2F%3E%3Cg%20id%3D%22root-9%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22Frontend%22%20height%3D%2265%22%20width%3D%22168%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%22452%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%22536%22%3E%3Ctspan%20dy%3D%22-8%22%20x%3D%22536%22%3E%E5%89%8D%E7%AB%AF%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%22536%22%3E%3Ctspan%20dy%3D%228%22%20x%3D%22536%22%3E(MultimodalChat.tsx)%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cg%3E%3Cline%20stroke%3D%22%23999%22%20stroke-width%3D%220.5px%22%20class%3D%22200%22%20y2%3D%226897%22%20x2%3D%2275%22%20y1%3D%225%22%20x1%3D%2275%22%20id%3D%22actor8%22%2F%3E%3Cg%20id%3D%22root-8%22%3E%3Crect%20class%3D%22actor%20actor-top%22%20ry%3D%223%22%20rx%3D%223%22%20name%3D%22User%22%20height%3D%2265%22%20width%3D%22150%22%20stroke%3D%22%23666%22%20fill%3D%22%23eaeaea%22%20y%3D%220%22%20x%3D%220%22%2F%3E%3Ctext%20style%3D%22text-anchor%3A%20middle%3B%20font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22actor%22%20alignment-baseline%3D%22central%22%20dominant-baseline%3D%22central%22%20y%3D%2232.5%22%20x%3D%2275%22%3E%3Ctspan%20dy%3D%220%22%20x%3D%2275%22%3E%E7%94%A8%E6%88%B7%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3Cstyle%3E%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%7Bfont-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3Bfont-size%3A16px%3Bfill%3A%23333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.error-icon%7Bfill%3A%23552222%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.error-text%7Bfill%3A%23552222%3Bstroke%3A%23552222%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.edge-thickness-normal%7Bstroke-width%3A2px%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.edge-thickness-thick%7Bstroke-width%3A3.5px%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.edge-pattern-solid%7Bstroke-dasharray%3A0%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.edge-pattern-dashed%7Bstroke-dasharray%3A3%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.edge-pattern-dotted%7Bstroke-dasharray%3A2%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.marker%7Bfill%3A%23333333%3Bstroke%3A%23333333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.marker.cross%7Bstroke%3A%23333333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20svg%7Bfont-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3Bfont-size%3A16px%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.actor%7Bstroke%3Ahsl(259.6261682243%2C%2059.7765363128%25%2C%2087.9019607843%25)%3Bfill%3A%23ECECFF%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20text.actor%26gt%3Btspan%7Bfill%3Ablack%3Bstroke%3Anone%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.actor-line%7Bstroke%3Agrey%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.messageLine0%7Bstroke-width%3A1.5%3Bstroke-dasharray%3Anone%3Bstroke%3A%23333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.messageLine1%7Bstroke-width%3A1.5%3Bstroke-dasharray%3A2%2C2%3Bstroke%3A%23333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20%23arrowhead%20path%7Bfill%3A%23333%3Bstroke%3A%23333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.sequenceNumber%7Bfill%3Awhite%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20%23sequencenumber%7Bfill%3A%23333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20%23crosshead%20path%7Bfill%3A%23333%3Bstroke%3A%23333%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.messageText%7Bfill%3A%23333%3Bstroke%3Anone%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.labelBox%7Bstroke%3Ahsl(259.6261682243%2C%2059.7765363128%25%2C%2087.9019607843%25)%3Bfill%3A%23ECECFF%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.labelText%2C%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.labelText%26gt%3Btspan%7Bfill%3Ablack%3Bstroke%3Anone%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.loopText%2C%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.loopText%26gt%3Btspan%7Bfill%3Ablack%3Bstroke%3Anone%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.loopLine%7Bstroke-width%3A2px%3Bstroke-dasharray%3A2%2C2%3Bstroke%3Ahsl(259.6261682243%2C%2059.7765363128%25%2C%2087.9019607843%25)%3Bfill%3Ahsl(259.6261682243%2C%2059.7765363128%25%2C%2087.9019607843%25)%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.note%7Bstroke%3A%23aaaa33%3Bfill%3A%23fff5ad%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.noteText%2C%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.noteText%26gt%3Btspan%7Bfill%3Ablack%3Bstroke%3Anone%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.activation0%7Bfill%3A%23f4f4f4%3Bstroke%3A%23666%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.activation1%7Bfill%3A%23f4f4f4%3Bstroke%3A%23666%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.activation2%7Bfill%3A%23f4f4f4%3Bstroke%3A%23666%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.actorPopupMenu%7Bposition%3Aabsolute%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.actorPopupMenuPanel%7Bposition%3Aabsolute%3Bfill%3A%23ECECFF%3Bbox-shadow%3A0px%208px%2016px%200px%20rgba(0%2C0%2C0%2C0.2)%3Bfilter%3Adrop-shadow(3px%205px%202px%20rgb(0%200%200%20%2F%200.4))%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.actor-man%20line%7Bstroke%3Ahsl(259.6261682243%2C%2059.7765363128%25%2C%2087.9019607843%25)%3Bfill%3A%23ECECFF%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20.actor-man%20circle%2C%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20line%7Bstroke%3Ahsl(259.6261682243%2C%2059.7765363128%25%2C%2087.9019607843%25)%3Bfill%3A%23ECECFF%3Bstroke-width%3A2px%3B%7D%23text-diagram-a0792165-bb7b-4c9a-8620-bce3756dd35a-22477%20%3Aroot%7B--mermaid-font-family%3A%22trebuchet%20ms%22%2Cverdana%2Carial%2Csans-serif%3B%7D%3C%2Fstyle%3E%3Cg%2F%3E%3Cdefs%3E%3Csymbol%20height%3D%2224%22%20width%3D%2224%22%20id%3D%22computer%22%3E%3Cpath%20d%3D%22M2%202v13h20v-13h-20zm18%2011h-16v-9h16v9zm-10.228%206l.466-1h3.524l.467%201h-4.457zm14.228%203h-24l2-6h2.104l-1.33%204h18.45l-1.297-4h2.073l2%206zm-5-10h-14v-7h14v7z%22%20transform%3D%22scale(.5)%22%2F%3E%3C%2Fsymbol%3E%3C%2Fdefs%3E%3Cdefs%3E%3Csymbol%20clip-rule%3D%22evenodd%22%20fill-rule%3D%22evenodd%22%20id%3D%22database%22%3E%3Cpath%20d%3D%22M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258%2020.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z%22%20transform%3D%22scale(.5)%22%2F%3E%3C%2Fsymbol%3E%3C%2Fdefs%3E%3Cdefs%3E%3Csymbol%20height%3D%2224%22%20width%3D%2224%22%20id%3D%22clock%22%3E%3Cpath%20d%3D%22M12%202c5.514%200%2010%204.486%2010%2010s-4.486%2010-10%2010-10-4.486-10-10%204.486-10%2010-10zm0-2c-6.627%200-12%205.373-12%2012s5.373%2012%2012%2012%2012-5.373%2012-12-5.373-12-12-12zm5.848%2012.459c.202.038.202.333.001.372-1.907.361-6.045%201.111-6.547%201.111-.719%200-1.301-.582-1.301-1.301%200-.512.77-5.447%201.125-7.445.034-.192.312-.181.343.014l.985%206.238%205.394%201.011z%22%20transform%3D%22scale(.5)%22%2F%3E%3C%2Fsymbol%3E%3C%2Fdefs%3E%3Cdefs%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2212%22%20markerWidth%3D%2212%22%20markerUnits%3D%22userSpaceOnUse%22%20refY%3D%225%22%20refX%3D%227.9%22%20id%3D%22arrowhead%22%3E%3Cpath%20d%3D%22M%200%200%20L%2010%205%20L%200%2010%20z%22%2F%3E%3C%2Fmarker%3E%3C%2Fdefs%3E%3Cdefs%3E%3Cmarker%20refY%3D%224.5%22%20refX%3D%224%22%20orient%3D%22auto%22%20markerHeight%3D%228%22%20markerWidth%3D%2215%22%20id%3D%22crosshead%22%3E%3Cpath%20style%3D%22stroke-dasharray%3A%200%2C%200%3B%22%20d%3D%22M%201%2C2%20L%206%2C7%20M%206%2C2%20L%201%2C7%22%20stroke-width%3D%221pt%22%20stroke%3D%22%23000000%22%20fill%3D%22none%22%2F%3E%3C%2Fmarker%3E%3C%2Fdefs%3E%3Cdefs%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2228%22%20markerWidth%3D%2220%22%20refY%3D%227%22%20refX%3D%2215.5%22%20id%3D%22filled-head%22%3E%3Cpath%20d%3D%22M%2018%2C7%20L9%2C13%20L14%2C7%20L9%2C1%20Z%22%2F%3E%3C%2Fmarker%3E%3C%2Fdefs%3E%3Cdefs%3E%3Cmarker%20orient%3D%22auto%22%20markerHeight%3D%2240%22%20markerWidth%3D%2260%22%20refY%3D%2215%22%20refX%3D%2215%22%20id%3D%22sequencenumber%22%3E%3Ccircle%20r%3D%226%22%20cy%3D%2215%22%20cx%3D%2215%22%2F%3E%3C%2Fmarker%3E%3C%2Fdefs%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%2275%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%2280%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%201%3A%20%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E4%B8%8E%E8%AF%B7%E6%B1%82%E5%8F%91%E9%80%81%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%22443%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22448%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%202%3A%20%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86%E4%B8%8E%E6%84%8F%E5%9B%BE%E8%AF%86%E5%88%AB%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%22858%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22863%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%203%3A%20%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E5%BC%80%E5%A7%8B%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%221388%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221393%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%204%3A%20%E6%96%87%E6%9C%AC%E9%83%A8%E5%88%86%E5%BC%80%E5%A7%8B%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%221726%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221731%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%205%3A%20%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E5%BC%80%E5%A7%8B%EF%BC%88%E6%B5%81%E5%BC%8F%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%EF%BC%89%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%222140%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222145%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%206%3A%20%E6%B5%81%E5%BC%8F%E6%8E%A5%E6%94%B6%E5%B7%A5%E5%85%B7%E5%8F%82%E6%95%B0%EF%BC%88JSON%20%E9%80%90%E6%AD%A5%E4%BC%A0%E8%BE%93%EF%BC%89%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%222189%22%20x2%3D%221967%22%20y1%3D%222189%22%20x1%3D%22429.5%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%223060%22%20x2%3D%221967%22%20y1%3D%222189%22%20x1%3D%221967%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%223060%22%20x2%3D%221967%22%20y1%3D%223060%22%20x1%3D%22429.5%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%223060%22%20x2%3D%22429.5%22%20y1%3D%222189%22%20x1%3D%22429.5%22%2F%3E%3Cpolygon%20class%3D%22labelBox%22%20points%3D%22429.5%2C2189%20479.5%2C2189%20479.5%2C2202%20471.1%2C2209%20429.5%2C2209%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22labelText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222202%22%20x%3D%22455%22%3Eloop%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22loopText%22%20text-anchor%3D%22middle%22%20y%3D%222207%22%20x%3D%221223.25%22%3E%3Ctspan%20x%3D%221223.25%22%3E%5B%E5%A4%9A%E6%AC%A1%20tool-input-delta%5D%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%223070%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223075%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%207%3A%20%E5%B7%A5%E5%85%B7%E5%8F%82%E6%95%B0%E6%8E%A5%E6%94%B6%E5%AE%8C%E6%88%90%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%223532%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223537%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%208%3A%20%E6%96%87%E6%9C%AC%E9%83%A8%E5%88%86%E7%BB%93%E6%9D%9F%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%223773%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223778%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%209%3A%20%E5%B7%A5%E5%85%B7%E6%89%A7%E8%A1%8C%EF%BC%88%E8%A7%86%E9%A2%91%E7%94%9F%E6%88%90%20-%20%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%EF%BC%89%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%224209%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224214%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%2010%3A%20%E8%BD%AE%E8%AF%A2%E4%BB%BB%E5%8A%A1%E7%8A%B6%E6%80%81%EF%BC%88%E5%A4%9A%E6%AC%A1%E6%9F%A5%E8%AF%A2%EF%BC%89%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%22166%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%224579%22%20x%3D%222073%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224584%22%20x%3D%222156%22%3E%3Ctspan%20x%3D%222156%22%3E%E7%AD%89%E5%BE%85%202%20%E7%A7%92%E5%90%8E%E7%BB%A7%E7%BB%AD%E8%BD%AE%E8%AF%A2%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%224437%22%20x2%3D%222254%22%20y1%3D%224437%22%20x1%3D%221225%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%225103%22%20x2%3D%222254%22%20y1%3D%224437%22%20x1%3D%222254%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%225103%22%20x2%3D%222254%22%20y1%3D%225103%22%20x1%3D%221225%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%225103%22%20x2%3D%221225%22%20y1%3D%224437%22%20x1%3D%221225%22%2F%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%22%20class%3D%22loopLine%22%20y2%3D%224633%22%20x2%3D%222254%22%20y1%3D%224633%22%20x1%3D%221225%22%2F%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%22%20class%3D%22loopLine%22%20y2%3D%224899%22%20x2%3D%222254%22%20y1%3D%224899%22%20x1%3D%221225%22%2F%3E%3Cpolygon%20class%3D%22labelBox%22%20points%3D%221225%2C4437%201275%2C4437%201275%2C4450%201266.6%2C4457%201225%2C4457%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22labelText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224450%22%20x%3D%221250%22%3Ealt%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22loopText%22%20text-anchor%3D%22middle%22%20y%3D%224455%22%20x%3D%221764.5%22%3E%3Ctspan%20x%3D%221764.5%22%3E%5B%E4%BB%BB%E5%8A%A1%E8%BF%9B%E8%A1%8C%E4%B8%AD%5D%3C%2Ftspan%3E%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22loopText%22%20text-anchor%3D%22middle%22%20y%3D%224651%22%20x%3D%221739.5%22%3E%5B%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90%5D%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22loopText%22%20text-anchor%3D%22middle%22%20y%3D%224917%22%20x%3D%221739.5%22%3E%5B%E4%BB%BB%E5%8A%A1%E5%A4%B1%E8%B4%A5%5D%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%224258%22%20x2%3D%222611%22%20y1%3D%224258%22%20x1%3D%221215%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%225113%22%20x2%3D%222611%22%20y1%3D%224258%22%20x1%3D%222611%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%225113%22%20x2%3D%222611%22%20y1%3D%225113%22%20x1%3D%221215%22%2F%3E%3Cline%20class%3D%22loopLine%22%20y2%3D%225113%22%20x2%3D%221215%22%20y1%3D%224258%22%20x1%3D%221215%22%2F%3E%3Cpolygon%20class%3D%22labelBox%22%20points%3D%221215%2C4258%201265%2C4258%201265%2C4271%201256.6%2C4278%201215%2C4278%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22labelText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224271%22%20x%3D%221240%22%3Eloop%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20class%3D%22loopText%22%20text-anchor%3D%22middle%22%20y%3D%224276%22%20x%3D%221938%22%3E%3Ctspan%20x%3D%221938%22%3E%5B%E8%BD%AE%E8%AF%A2%201-60%20%E6%AC%A1%EF%BC%88%E6%AF%8F%E6%AC%A1%E9%97%B4%E9%9A%942%E7%A7%92%EF%BC%89%5D%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%225123%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225128%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%2011%3A%20%E5%B7%A5%E5%85%B7%E8%BE%93%E5%87%BA%E8%BF%94%E5%9B%9E%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%225652%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225657%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%2012%3A%20%E6%AD%A5%E9%AA%A4%E5%AE%8C%E6%88%90%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%225893%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225898%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%2013%3A%20%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E7%BB%93%E6%9D%9F%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Cg%3E%3Crect%20class%3D%22note%22%20ry%3D%220%22%20rx%3D%220%22%20height%3D%2239%22%20width%3D%222575%22%20stroke%3D%22%23666%22%20fill%3D%22%23EDF2AE%22%20y%3D%226442%22%20x%3D%2250%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22noteText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226447%22%20x%3D%221338%22%3E%3Ctspan%20x%3D%221338%22%3E%E9%98%B6%E6%AE%B5%2014%3A%20%E5%89%8D%E7%AB%AF%E6%B8%B2%E6%9F%93%3C%2Ftspan%3E%3C%2Ftext%3E%3C%2Fg%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22129%22%20x%3D%22304%22%3E%E8%BE%93%E5%85%A5%3A%20%22%E5%B8%AE%E6%88%91%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E8%A7%86%E9%A2%91%EF%BC%8C%E5%86%85%E5%AE%B9%E6%98%AF%E6%B5%B7%E6%B5%AA%E6%8B%8D%E6%89%93%E6%B5%B7%E5%B2%B8%E7%9A%84%E5%9C%BA%E6%99%AF%22%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%22162%22%20x2%3D%22532%22%20y1%3D%22162%22%20x1%3D%2276%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22177%22%20x%3D%22537%22%3EhandleSubmit()%20%E8%A7%A6%E5%8F%91%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C210%20C%20597%2C200%20597%2C240%20537%2C230%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22255%22%20x%3D%22537%22%3EsendMessage(%7B%20text%3A%20%22%E5%B8%AE%E6%88%91%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E8%A7%86%E9%A2%91%EF%BC%8C%E5%86%85%E5%AE%B9%E6%98%AF%E6%B5%B7%E6%B5%AA%E6%8B%8D%E6%89%93%E6%B5%B7%E5%B2%B8%E7%9A%84%E5%9C%BA%E6%99%AF%22%20%7D)%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C288%20C%20597%2C278%20597%2C318%20537%2C308%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22333%22%20x%3D%22710%22%3EPOST%20%2Fapi%2Fai-sdk%2Fmultimodal%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22352%22%20x%3D%22710%22%3E%7B%20messages%3A%20%5B%7B%20role%3A%20'user'%2C%20parts%3A%20%5B...%5D%20%7D%5D%20%7D%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%22385%22%20x2%3D%22882%22%20y1%3D%22385%22%20x1%3D%22537%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22400%22%20x%3D%221060%22%3EHTTP%20POST%20%E8%AF%B7%E6%B1%82%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%22433%22%20x2%3D%221232%22%20y1%3D%22433%22%20x1%3D%22887%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22497%22%20x%3D%221237%22%3E%E8%A7%A3%E6%9E%90%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%BD%AC%E6%8D%A2%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%201237%2C530%20C%201297%2C520%201297%2C560%201237%2C550%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22575%22%20x%3D%221411%22%3EstreamText(%7B%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22594%22%20x%3D%221411%22%3E%20%20model%3A%20deepseek%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22612%22%20x%3D%221411%22%3E%20%20messages%3A%20modelMessages%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22631%22%20x%3D%221411%22%3E%20%20tools%3A%20%7B%20generateImage%2C%20generateVideo%20%7D%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22649%22%20x%3D%221411%22%3E%7D)%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%22684%22%20x2%3D%221584%22%20y1%3D%22684%22%20x1%3D%221237%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22699%22%20x%3D%221771%22%3E%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E5%88%B0%20AI%20%E6%A8%A1%E5%9E%8B%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%22732%22%20x2%3D%221952%22%20y1%3D%22732%22%20x1%3D%221589%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22747%22%20x%3D%221957%22%3E%E5%88%86%E6%9E%90%E7%94%A8%E6%88%B7%E6%84%8F%E5%9B%BE%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22766%22%20x%3D%221957%22%3E%E5%8C%B9%E9%85%8D%E5%B7%A5%E5%85%B7%E6%8F%8F%E8%BF%B0%E5%85%B3%E9%94%AE%E8%AF%8D%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22784%22%20x%3D%221957%22%3E%22%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E8%A7%86%E9%A2%91%22%20%E2%86%92%20generateVideo%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%201957%2C818%20C%202017%2C808%202017%2C848%201957%2C838%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22912%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22start%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%22945%22%20x2%3D%221592%22%20y1%3D%22945%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%22960%22%20x%3D%221414%22%3E%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E5%BC%80%E5%A7%8B%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%22993%22%20x2%3D%221240%22%20y1%3D%22993%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221008%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22start%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221041%22%20x2%3D%22890%22%20y1%3D%221041%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221056%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E6%B5%81%E5%BC%8F%E6%95%B0%E6%8D%AE%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221089%22%20x2%3D%22540%22%20y1%3D%221089%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221104%22%20x%3D%22537%22%3EuseChat%20Hook%20%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221123%22%20x%3D%22537%22%3Estatus%20%3D%20'streaming'%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C1156%20C%20597%2C1146%20597%2C1186%20537%2C1176%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221201%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22start-step%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221234%22%20x2%3D%221592%22%20y1%3D%221234%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221249%22%20x%3D%221414%22%3E%E6%AD%A5%E9%AA%A4%E5%BC%80%E5%A7%8B%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221282%22%20x2%3D%221240%22%20y1%3D%221282%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221297%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22start-step%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221330%22%20x2%3D%22890%22%20y1%3D%221330%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221345%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E6%AD%A5%E9%AA%A4%E5%BC%80%E5%A7%8B%E4%BA%8B%E4%BB%B6%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221378%22%20x2%3D%22540%22%20y1%3D%221378%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221442%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22text-start%22%2C%22id%22%3A%220%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221475%22%20x2%3D%221592%22%20y1%3D%221475%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221490%22%20x%3D%221414%22%3E%E6%96%87%E6%9C%AC%E9%83%A8%E5%88%86%E5%BC%80%E5%A7%8B%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221523%22%20x2%3D%221240%22%20y1%3D%221523%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221538%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22text-start%22%2C%22id%22%3A%220%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221571%22%20x2%3D%22890%22%20y1%3D%221571%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221586%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E6%96%87%E6%9C%AC%E5%BC%80%E5%A7%8B%E4%BA%8B%E4%BB%B6%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221619%22%20x2%3D%22540%22%20y1%3D%221619%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221634%22%20x%3D%22537%22%3E%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%20assistant%20%E6%B6%88%E6%81%AF%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221653%22%20x%3D%22537%22%3Eparts%3A%20%5B%7B%20type%3A%20'text'%2C%20text%3A%20''%20%7D%5D%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C1686%20C%20597%2C1676%20597%2C1716%20537%2C1706%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221780%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-start%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221799%22%20x%3D%221774%22%3E%22toolCallId%22%3A%22call_xxx%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221817%22%20x%3D%221774%22%3E%22toolName%22%3A%22generateVideo%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221851%22%20x2%3D%221592%22%20y1%3D%221851%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221866%22%20x%3D%221414%22%3E%E5%B7%A5%E5%85%B7%E8%BE%93%E5%85%A5%E5%BC%80%E5%A7%8B%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221899%22%20x2%3D%221240%22%20y1%3D%221899%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221914%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-start%22%2C...%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221947%22%20x2%3D%22890%22%20y1%3D%221947%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%221962%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E5%BC%80%E5%A7%8B%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%221995%22%20x2%3D%22540%22%20y1%3D%221995%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222010%22%20x%3D%22537%22%3E%E6%9B%B4%E6%96%B0%E6%B6%88%E6%81%AF%20parts%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222029%22%20x%3D%22537%22%3E%E6%B7%BB%E5%8A%A0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222047%22%20x%3D%22537%22%3Estate%3A%20'input-streaming'%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222066%22%20x%3D%22537%22%3Econsole.log('%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part%3A%20input-streaming')%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C2100%20C%20597%2C2090%20597%2C2130%20537%2C2120%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222239%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222258%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%7B%5C%22%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222291%22%20x2%3D%221592%22%20y1%3D%222291%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222306%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222325%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22prompt%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222358%22%20x2%3D%221592%22%20y1%3D%222358%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222373%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222392%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%5C%22%3A%5C%22%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222425%22%20x2%3D%221592%22%20y1%3D%222425%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222440%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222459%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%E6%B5%B7%E6%B5%AA%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222492%22%20x2%3D%221592%22%20y1%3D%222492%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222507%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222526%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%E6%8B%8D%E6%89%93%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222559%22%20x2%3D%221592%22%20y1%3D%222559%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222574%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222593%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%E6%B5%B7%E5%B2%B8%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222626%22%20x2%3D%221592%22%20y1%3D%222626%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222641%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222660%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%E7%9A%84%E5%9C%BA%E6%99%AF%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222693%22%20x2%3D%221592%22%20y1%3D%222693%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222708%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-delta%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222727%22%20x%3D%221774%22%3E%22inputTextDelta%22%3A%22%5C%22%7D%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222760%22%20x2%3D%221592%22%20y1%3D%222760%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222775%22%20x%3D%221414%22%3E%E9%80%90%E6%AD%A5%E4%BC%A0%E8%BE%93%20JSON%20%E5%8F%82%E6%95%B0%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222808%22%20x2%3D%221240%22%20y1%3D%222808%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222823%22%20x%3D%221063%22%3E%E6%B5%81%E5%BC%8F%E4%BC%A0%E8%BE%93%E5%8F%82%E6%95%B0%E7%89%87%E6%AE%B5%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222856%22%20x2%3D%22890%22%20y1%3D%222856%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222871%22%20x%3D%22713%22%3E%E9%80%90%E6%AD%A5%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%222904%22%20x2%3D%22540%22%20y1%3D%222904%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222919%22%20x%3D%22537%22%3E%E6%9B%B4%E6%96%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part.input%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222938%22%20x%3D%22537%22%3E%E9%80%90%E6%AD%A5%E6%8B%BC%E6%8E%A5%20JSON%20%E5%AD%97%E7%AC%A6%E4%B8%B2%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%222956%22%20x%3D%22537%22%3E%E5%A4%9A%E6%AC%A1%E8%A7%A6%E5%8F%91%E6%B8%B2%E6%9F%93%EF%BC%88useEffect%EF%BC%89%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C2990%20C%20597%2C2980%20597%2C3020%20537%2C3010%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223124%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-available%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223143%22%20x%3D%221774%22%3E%22toolCallId%22%3A%22call_xxx%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223161%22%20x%3D%221774%22%3E%22toolName%22%3A%22generateVideo%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223180%22%20x%3D%221774%22%3E%22input%22%3A%7B%22prompt%22%3A%22%E6%B5%B7%E6%B5%AA%E6%8B%8D%E6%89%93%E6%B5%B7%E5%B2%B8%E7%9A%84%E5%9C%BA%E6%99%AF%22%7D%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223214%22%20x2%3D%221592%22%20y1%3D%223214%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223229%22%20x%3D%221414%22%3E%E5%B7%A5%E5%85%B7%E8%BE%93%E5%85%A5%E5%AE%8C%E6%95%B4%E5%8F%AF%E7%94%A8%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223262%22%20x2%3D%221240%22%20y1%3D%223262%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223277%22%20x%3D%221695%22%3E%E6%89%A7%E8%A1%8C%20generateVideo(%7B%20prompt%3A%20%22%E6%B5%B7%E6%B5%AA%E6%8B%8D%E6%89%93%E6%B5%B7%E5%B2%B8%E7%9A%84%E5%9C%BA%E6%99%AF%22%20%7D)%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%223310%22%20x2%3D%222152%22%20y1%3D%223310%22%20x1%3D%221237%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223325%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22tool-input-available%22%2C...%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223358%22%20x2%3D%22890%22%20y1%3D%223358%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223373%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E5%B7%A5%E5%85%B7%E5%8F%82%E6%95%B0%E5%AE%8C%E6%95%B4%E4%BA%8B%E4%BB%B6%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223406%22%20x2%3D%22540%22%20y1%3D%223406%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223421%22%20x%3D%22537%22%3E%E6%9B%B4%E6%96%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223440%22%20x%3D%22537%22%3Estate%3A%20'input-available'%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223458%22%20x%3D%22537%22%3Einput%3A%20%7B%20prompt%3A%20%22%E6%B5%B7%E6%B5%AA%E6%8B%8D%E6%89%93%E6%B5%B7%E5%B2%B8%E7%9A%84%E5%9C%BA%E6%99%AF%22%20%7D%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C3492%20C%20597%2C3482%20597%2C3522%20537%2C3512%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223586%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22text-end%22%2C%22id%22%3A%220%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223619%22%20x2%3D%221592%22%20y1%3D%223619%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223634%22%20x%3D%221414%22%3E%E6%96%87%E6%9C%AC%E9%83%A8%E5%88%86%E7%BB%93%E6%9D%9F%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223667%22%20x2%3D%221240%22%20y1%3D%223667%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223682%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22text-end%22%2C%22id%22%3A%220%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223715%22%20x2%3D%22890%22%20y1%3D%223715%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223730%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E6%96%87%E6%9C%AC%E7%BB%93%E6%9D%9F%E4%BA%8B%E4%BB%B6%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%223763%22%20x2%3D%22540%22%20y1%3D%223763%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223827%22%20x%3D%222157%22%3E%E9%AA%8C%E8%AF%81%20prompt%20%E5%8F%82%E6%95%B0%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%202157%2C3860%20C%202217%2C3850%202217%2C3890%202157%2C3880%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223905%22%20x%3D%222377%22%3EPOST%20%2Fapi%2Fv3%2Fcontents%2Fgenerations%2Ftasks%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223924%22%20x%3D%222377%22%3E%7B%20model%3A%20%22doubao-seedance-1-5-pro-251215%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223942%22%20x%3D%222377%22%3E%20%20content%3A%20%5B%7B%20type%3A%20'text'%2C%20text%3A%20'%E6%B5%B7%E6%B5%AA%E6%8B%8D%E6%89%93%E6%B5%B7%E5%B2%B8%E7%9A%84%E5%9C%BA%E6%99%AF'%20%7D%5D%20%7D%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%223976%22%20x2%3D%222596%22%20y1%3D%223976%22%20x1%3D%222157%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%223991%22%20x%3D%222601%22%3E%E5%88%9B%E5%BB%BA%E8%A7%86%E9%A2%91%E7%94%9F%E6%88%90%E4%BB%BB%E5%8A%A1%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%202601%2C4024%20C%202661%2C4014%202661%2C4054%202601%2C4044%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224069%22%20x%3D%222380%22%3E%E8%BF%94%E5%9B%9E%E4%BB%BB%E5%8A%A1%20ID%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224088%22%20x%3D%222380%22%3E%7B%20id%3A%20%22task_xxx%22%2C%20status%3A%20%22pending%22%20%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%224121%22%20x2%3D%222160%22%20y1%3D%224121%22%20x1%3D%222599%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224136%22%20x%3D%222157%22%3E%E4%BF%9D%E5%AD%98%20taskId%20%3D%20%22task_xxx%22%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%202157%2C4169%20C%202217%2C4159%202217%2C4199%202157%2C4189%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224308%22%20x%3D%222377%22%3EGET%20%2Fapi%2Fv3%2Fcontents%2Fgenerations%2Ftasks%2Ftask_xxx%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%224341%22%20x2%3D%222596%22%20y1%3D%224341%22%20x1%3D%222157%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224356%22%20x%3D%222380%22%3E%E8%BF%94%E5%9B%9E%E4%BB%BB%E5%8A%A1%E7%8A%B6%E6%80%81%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224375%22%20x%3D%222380%22%3E%7B%20status%3A%20%22processing%22%20%7D%20%E6%88%96%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224393%22%20x%3D%222380%22%3E%7B%20status%3A%20%22succeeded%22%2C%20video_url%3A%20%22https%3A%2F%2F...%22%20%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%224427%22%20x2%3D%222160%22%20y1%3D%224427%22%20x1%3D%222599%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224487%22%20x%3D%222157%22%3Estatus%20%3D%3D%3D%20%22processing%22%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224506%22%20x%3D%222157%22%3E%E7%BB%A7%E7%BB%AD%E7%AD%89%E5%BE%85%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%202157%2C4539%20C%202217%2C4529%202217%2C4569%202157%2C4559%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224678%22%20x%3D%222157%22%3Estatus%20%3D%3D%3D%20%22succeeded%22%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224697%22%20x%3D%222157%22%3E%E6%8F%90%E5%8F%96%20videoUrl%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%202157%2C4730%20C%202217%2C4720%202217%2C4760%202157%2C4750%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224775%22%20x%3D%221698%22%3E%E8%BF%94%E5%9B%9E%E5%B7%A5%E5%85%B7%E7%BB%93%E6%9E%9C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224794%22%20x%3D%221698%22%3E%7B%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224812%22%20x%3D%221698%22%3E%20%20success%3A%20true%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224831%22%20x%3D%221698%22%3E%20%20videoUrl%3A%20%22https%3A%2F%2F...%22%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224849%22%20x%3D%221698%22%3E%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%224884%22%20x2%3D%221240%22%20y1%3D%224884%22%20x1%3D%222155%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224944%22%20x%3D%222157%22%3Estatus%20%3D%3D%3D%20%22failed%22%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%224963%22%20x%3D%222157%22%3E%E6%8F%90%E5%8F%96%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%202157%2C4996%20C%202217%2C4986%202217%2C5026%202157%2C5016%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225041%22%20x%3D%221698%22%3E%E8%BF%94%E5%9B%9E%E5%B7%A5%E5%85%B7%E7%BB%93%E6%9E%9C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225060%22%20x%3D%221698%22%3E%7B%20success%3A%20false%2C%20error%3A%20%22...%22%20%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225093%22%20x2%3D%221240%22%20y1%3D%225093%22%20x1%3D%222155%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225177%22%20x%3D%221411%22%3E%E5%B7%A5%E5%85%B7%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%225210%22%20x2%3D%221584%22%20y1%3D%225210%22%20x1%3D%221237%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225225%22%20x%3D%221771%22%3E%E5%B0%86%E5%B7%A5%E5%85%B7%E7%BB%93%E6%9E%9C%E8%BF%94%E5%9B%9E%E7%BB%99%20AI%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%225258%22%20x2%3D%221952%22%20y1%3D%225258%22%20x1%3D%221589%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225273%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22tool-output-available%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225292%22%20x%3D%221774%22%3E%22toolCallId%22%3A%22call_xxx%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225310%22%20x%3D%221774%22%3E%22output%22%3A%7B%22success%22%3Atrue%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225329%22%20x%3D%221774%22%3E%22videoUrl%22%3A%22https%3A%2F%2F...%22%7D%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225363%22%20x2%3D%221592%22%20y1%3D%225363%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225378%22%20x%3D%221414%22%3E%E5%B7%A5%E5%85%B7%E8%BE%93%E5%87%BA%E5%8F%AF%E7%94%A8%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225411%22%20x2%3D%221240%22%20y1%3D%225411%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225426%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22tool-output-available%22%2C...%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225459%22%20x2%3D%22890%22%20y1%3D%225459%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225474%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E5%B7%A5%E5%85%B7%E8%BE%93%E5%87%BA%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225507%22%20x2%3D%22540%22%20y1%3D%225507%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225522%22%20x%3D%22537%22%3E%E6%9B%B4%E6%96%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225541%22%20x%3D%22537%22%3Estate%3A%20'output-available'%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225559%22%20x%3D%22537%22%3Eoutput%3A%20%7B%20success%3A%20true%2C%20videoUrl%3A%20%22https%3A%2F%2F...%22%20%7D%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225578%22%20x%3D%22537%22%3Econsole.log('%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part%3A%20output-available')%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C5612%20C%20597%2C5602%20597%2C5642%20537%2C5632%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225706%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22finish-step%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225739%22%20x2%3D%221592%22%20y1%3D%225739%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225754%22%20x%3D%221414%22%3E%E6%AD%A5%E9%AA%A4%E5%AE%8C%E6%88%90%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225787%22%20x2%3D%221240%22%20y1%3D%225787%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225802%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22finish-step%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225835%22%20x2%3D%22890%22%20y1%3D%225835%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225850%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E6%AD%A5%E9%AA%A4%E5%AE%8C%E6%88%90%E4%BA%8B%E4%BB%B6%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225883%22%20x2%3D%22540%22%20y1%3D%225883%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225947%22%20x%3D%221774%22%3Edata%3A%20%7B%22type%22%3A%22finish%22%2C%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%225966%22%20x%3D%221774%22%3E%22finishReason%22%3A%22tool-calls%22%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%225999%22%20x2%3D%221592%22%20y1%3D%225999%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226014%22%20x%3D%221414%22%3E%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E5%AE%8C%E6%88%90%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226047%22%20x2%3D%221240%22%20y1%3D%226047%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226062%22%20x%3D%221063%22%3Edata%3A%20%7B%22type%22%3A%22finish%22%2C...%7D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226095%22%20x2%3D%22890%22%20y1%3D%226095%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226110%22%20x%3D%22713%22%3E%E6%8E%A5%E6%94%B6%E5%AE%8C%E6%88%90%E4%BA%8B%E4%BB%B6%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226143%22%20x2%3D%22540%22%20y1%3D%226143%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226158%22%20x%3D%22537%22%3Estatus%20%3D%20'ready'%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226177%22%20x%3D%22537%22%3E%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E7%BB%93%E6%9D%9F%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C6210%20C%20597%2C6200%20597%2C6240%20537%2C6230%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226255%22%20x%3D%221774%22%3Edata%3A%20%5BDONE%5D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226288%22%20x2%3D%221592%22%20y1%3D%226288%22%20x1%3D%221955%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226303%22%20x%3D%221414%22%3E%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E7%BB%93%E6%9D%9F%E6%A0%87%E8%AE%B0%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226336%22%20x2%3D%221240%22%20y1%3D%226336%22%20x1%3D%221587%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226351%22%20x%3D%221063%22%3Edata%3A%20%5BDONE%5D%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226384%22%20x2%3D%22890%22%20y1%3D%226384%22%20x1%3D%221235%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226399%22%20x%3D%22713%22%3E%E6%B5%81%E5%BC%8F%E5%93%8D%E5%BA%94%E5%AE%8C%E5%85%A8%E7%BB%93%E6%9D%9F%3C%2Ftext%3E%3Cline%20style%3D%22stroke-dasharray%3A%203%2C%203%3B%20fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine1%22%20y2%3D%226432%22%20x2%3D%22540%22%20y1%3D%226432%22%20x1%3D%22885%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226496%22%20x%3D%22537%22%3EuseEffect%20%E8%A7%A6%E5%8F%91%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226515%22%20x%3D%22537%22%3Emessages%20%E6%9B%B4%E6%96%B0%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C6548%20C%20597%2C6538%20597%2C6578%20537%2C6568%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226593%22%20x%3D%22537%22%3ErenderMessageContent()%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226612%22%20x%3D%22537%22%3E%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%20part%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226630%22%20x%3D%22537%22%3Estate%20%3D%3D%3D%20'output-available'%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C6664%20C%20597%2C6654%20597%2C6694%20537%2C6684%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226709%22%20x%3D%22537%22%3E%E6%B8%B2%E6%9F%93%E8%A7%86%E9%A2%91%E7%BB%84%E4%BB%B6%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226728%22%20x%3D%22537%22%3E%26lt%3Bvideo%20src%3D'%7Bresult.videoUrl%7D'%20controls%3D''%26gt%3B%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226746%22%20x%3D%22537%22%3E%E6%98%BE%E7%A4%BA%E4%B8%8B%E8%BD%BD%E6%8C%89%E9%92%AE%3C%2Ftext%3E%3Cpath%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20d%3D%22M%20537%2C6780%20C%20597%2C6770%20597%2C6810%20537%2C6800%22%2F%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226825%22%20x%3D%22307%22%3E%E6%98%BE%E7%A4%BA%E7%94%9F%E6%88%90%E7%9A%84%E8%A7%86%E9%A2%91%3C%2Ftext%3E%3Ctext%20style%3D%22font-size%3A%2016px%3B%20font-weight%3A%20400%3B%22%20dy%3D%221em%22%20class%3D%22messageText%22%20alignment-baseline%3D%22middle%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20y%3D%226844%22%20x%3D%22307%22%3E%2B%20%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE%26lt%3B%2Fvideo%26gt%3B%3C%2Ftext%3E%3Cline%20style%3D%22fill%3A%20none%3B%22%20marker-end%3D%22url(%23arrowhead)%22%20stroke%3D%22none%22%20stroke-width%3D%222%22%20class%3D%22messageLine0%22%20y2%3D%226877%22%20x2%3D%2279%22%20y1%3D%226877%22%20x1%3D%22535%22%2F%3E%3C%2Fsvg%3E)

我们再来看下各阶段的数据格式。

**前端发起视频生成请求后，后端接口流式响应的数据格式会有如下几个阶段：**

1\. 开始阶段

```javascript
data: {"type":"start"}
data: {"type":"start-step"}
```

2\. 文本部分

```javascript
data: {"type":"text-start","id":"0"}
data: {"type":"text-end","id":"0"}
```

3\. 工具调用 - 输入阶段（流式）

```javascript
data: {"type":"tool-input-start","toolCallId":"call_xxx","toolName":"generateVideo"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"{\""}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"prompt"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"\":\""}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"海浪"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"拍打"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"海岸"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"的场景"}
data: {"type":"tool-input-delta","toolCallId":"call_xxx","inputTextDelta":"\"}"}
data: {"type":"tool-input-available","toolCallId":"call_xxx","toolName":"generateVideo","input":{"prompt":"海浪拍打海岸的场景"}}
```

4\. 工具调用 - 输出阶段（注意：视频生成需要较长时间，这里会等待 30-120 秒）

```javascript
data: {"type":"tool-output-available","toolCallId":"call_xxx","output":{"success":true,"videoUrl":"https://..."}}
```

5\. 完成阶段

```javascript
data: {"type":"finish-step"}
data: {"type":"finish","finishReason":"tool-calls"}
data: [DONE]
```

**前端收到的消息变化：**

1\. 初始状态（用户消息发送后）

```javascript
messages = [
  { id: 'user_xxx', role: 'user', parts: [{ type: 'text', text: '帮我生成一个视频，内容是海浪拍打海岸的场景' }] }
]
```

2.流式响应开始（接收到 \`start\` 事件）

```javascript
messages = [
  { id: 'user_xxx', role: 'user', ... },
  { id: 'assistant_xxx', role: 'assistant', parts: [] }  // 新建 assistant 消息
]
```

3.文本部分开始（接收到 \`text-start\`）

```javascript
messages = [
  ...,
  { id: 'assistant_xxx', role: 'assistant', parts: [{ type: 'text', text: '', id: '0' }] }
]
```

4.工具调用开始（接收到 \`tool-input-start\`）

```javascript
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call', 
        toolName: 'generateVideo',
        toolCallId: 'call_xxx',
        state: 'input-streaming',  // 正在接收参数
        input: undefined,
        output: undefined
      }
    ]
  }
]
```

5.参数接收中（多次 \`tool-input-delta\`）

```javascript
// 每次 delta 都会触发重新渲染
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateVideo',
        state: 'input-streaming',
        input: '{"prompt":"海浪"'  // 逐步拼接
      }
    ]
  }
]
// 前端日志: console.log('工具调用 part: input-streaming')
```

6.参数接收完成（接收到 \`tool-input-available\`）

```javascript
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateVideo',
        state: 'input-available',  // 参数完整
        input: { prompt: '海浪拍打海岸的场景' },
        output: undefined
      }
    ]
  }
]
```

7.工具执行中（后端正在轮询豆包 API，前端显示"正在生成视频..."）

```javascript
// 此时前端显示加载状态
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateVideo',
        state: 'input-available',  // 等待工具执行完成
        input: { prompt: '海浪拍打海岸的场景' },
        output: undefined
      }
    ]
  }
]
// 前端 UI: 显示"正在生成视频..."（可能持续 30-120 秒）
```

8.工具执行完成（接收到 \`tool-output-available\`）

```javascript
messages = [
  ...,
  { 
    id: 'assistant_xxx', 
    role: 'assistant', 
    parts: [
      { type: 'text', text: '', id: '0' },
      { 
        type: 'tool-call',
        toolName: 'generateVideo',
        toolCallId: 'call_xxx',
        state: 'output-available',  // 输出可用
        input: { prompt: '海浪拍打海岸的场景' },
        output: {   // 注意：工具结果存储在 output 中，不是 result
          success: true, 
          videoUrl: 'https://...' 
        }
      }
    ]
  }
]
// 前端日志: console.log('工具调用 part: output-available')
// 前端渲染: <video src={part.output.videoUrl} controls />  // 使用 part.output 访问结果
```

最后再来看下关键代码。前端的关键代码和图片生成的差不多，主要看后端的。

[https://github.com/shixinzhang/AI-TODO/blob/main/pages/api/ai-sdk/multimodal.ts](https://github.com/shixinzhang/AI-TODO/blob/main/pages/api/ai-sdk/multimodal.ts)

1.  handler() 处理 POST 请求
    
2.  解析和转换消息格式
    
3.  streamText() 调用 AI 模型
    
4.  generateVideo.execute() 执行视频生成
    
5.  generateVideoWithDoubao() 视频生成函数
    
6.  创建视频生成任务（POST /api/v3/contents/generations/tasks）
    
7.  轮询查询任务状态（GET /api/v3/contents/generations/tasks/{taskId}）
    
8.  检查任务状态，提取 videoUrl
    
9.  toUIMessageStreamResponse() 转换为流式响应格式
    

**视频生成与图片生成的区别：**

1.  **异步任务模式**：视频生成采用"创建任务 + 轮询状态"的方式，而不是直接返回结果
    
2.  **执行时间更长**：视频生成通常需要 30-120 秒，而图片生成只需要几秒
    
3.  **状态轮询**：后端需要多次查询豆包 API 来获取任务状态，直到完成或失败
    
4.  **超时处理**：设置了最大轮询次数（60次）和超时机制，避免无限等待
    

## 五、意图识别机制

很多同学可能会问：AI 怎么知道用户是想聊天还是想画图？

答案是：**看工具描述。**

这就像你去餐厅点餐，服务员不需要你说"我要调用你的点餐功能"，你只需要说"来一份宫保鸡丁"，服务员自然知道你要点餐。

AI 也是一样。我们在定义工具的时候，会写一段"工具描述"，告诉 AI 这个工具是干嘛的、什么情况下用。AI 读懂了描述，就知道什么时候该调用这个工具。

## 5.1 自动意图识别是怎么工作的？

![](https://static.xiaobot.net/file/2026-01-08/21332/e0cbaeafe6aec1adb14f3a8e8e91aadb.png!post)

从上图我们可以看到，工具描述写得好不好，直接决定了 AI 能不能正确识别用户意图。

## 5.2 工具描述怎么写

来看两个例子：

```typescript
// ❌ 不好的描述 - 太简单
const generateImage = tool({
  description: '生成图片',
  // ...
});
// ✅ 好的描述 - 清晰明确、覆盖多种情况，AI 一看就懂
const generateImage = tool({
  description: '根据用户描述生成手绘风格的知识图片。当用户说"生成图片"、"画一张"、"帮我生成一张图"、"创建图片"等时使用。',
  // ...
});
```

第一个的工具描述只写了四个字，当用户输入的稍微委婉一点，AI 可能就理解不了要调用这个工具， 写工具描述最好符合这几个要点：

1.  **说清楚功能**：这个工具是干嘛的
    
2.  **列出触发词**：用户说什么话的时候该用这个工具，多一点
    
3.  **说明使用场景**：在什么情况下使用
    
4.  **划清边界**：什么情况下不该用（避免误触发）
    

比如：

```typescript
// 改进前
const generateImage = tool({
  description: '生成图片',
  // ...
});
// 改进后 - 包含更多触发关键词和使用场景
const generateImage = tool({
  description: `根据用户描述生成手绘风格的知识图片。
触发条件（满足以下任一条件即可）：
- 用户明确说"生成图片"、"画一张"、"帮我生成一张图"、"创建图片"、"制作图片"
- 用户说"我想要一张..."、"给我画一个..."、"帮我画..."
- 用户询问"能生成图片吗？"、"可以画图吗？"
使用场景：
- 用户想要生成知识图谱、概念图、示意图等
- 用户想要生成手绘风格的图片
- 用户想要可视化某个概念或想法`,
  // ...
});
```

这就像给实习生写工作说明——写得越清楚，他干活越不会出错。

## 5.3 工具的参数描述怎么写

除了描述，另外还需要写好参数的描述，它可以帮助 AI 更好地提取参数值。

```typescript
const generateImage = tool({
  description: '根据用户描述生成手绘风格的知识图片',
  inputSchema: z.object({
    prompt: z.string().describe('图片生成提示词，描述用户想要生成的图片内容。从用户输入中提取，如果用户没有明确说明，可以基于对话上下文推断。'),
  }),
  // ...
});
```

**AI 是如何提取参数值的工作原理的呢？要了解这个，需要了解我们用到的这个 Zod 库。**

**1\. Zod Schema 定义参数结构**

Zod schema 告诉 AI 每个参数的类型和约束：

```typescript
inputSchema: z.object({
  prompt: z.string()           // 告诉 AI：prompt 是一个字符串类型
    .min(1)                    // 告诉 AI：prompt 至少要有 1 个字符
    .max(500)                  // 告诉 AI：prompt 最多 500 个字符
    .describe('...')           // 告诉 AI：如何理解这个参数的含义
})
```

**2. z.string().describe() 方法的作用**

.describe() 方法中的描述会被转换为 JSON Schema 的 description 字段，发送给 AI 模型。这个描述帮助 AI 理解：

-   **参数的含义**：这个参数代表什么
    
-   **提取规则**：如何从用户输入中提取这个参数
    
-   **处理逻辑**：如果用户没有明确说明，应该如何处理
    

**3\. AI 提取参数的流程**

以用户输入 "帮我生成一张图，内容是一只可爱的小猫" 为例：

```none
步骤 1: AI 识别意图 → 决定调用 generateImage 工具
步骤 2: AI 读取参数 Schema（类型、约束、描述）
步骤 3: AI 从用户输入中提取参数值 → prompt = "一只可爱的小猫"
步骤 4: AI 构造工具调用并验证参数
```

## 5.4 系统提示词怎么写

在写好工具描述和参数后，下一个很重要的是系统提示词，它用来指导 AI 何时使用工具，提高意图识别的准确性。

比如我们这个多模态聊天项目里的系统提示词，就很细节，明确的写清楚了【使用工具的规则】：

```typescript
const result = await streamText({
  model: deepseek,
  messages: modelMessages,
  system: `你是一个友好的 AI 助手，可以帮助用户进行文本对话、生成图片和视频。
使用工具的规则：
1. 当用户想要生成图片时（如"生成图片"、"画一张"、"帮我生成一张图"等），使用 generateImage 工具
2. 当用户想要生成视频时（如"生成视频"、"做一个视频"、"帮我生成一个视频"等），使用 generateVideo 工具
3. 其他情况使用普通文本回复
注意：只有当用户明确要求生成图片或视频时，才调用相应的工具。`,
  tools: {
    generateImage,
    generateVideo,
  },
});
```

一个更加完整的提示词：

```typescript
system: `你是一个多模态 AI 助手，可以帮助用户：
1. 进行文本对话
2. 生成手绘风格的知识图片
3. 生成视频
工具使用规则：
- generateImage: 当用户明确要求生成图片时使用（关键词：生成图片、画一张、帮我生成一张图、创建图片等）
- generateVideo: 当用户明确要求生成视频时使用（关键词：生成视频、做一个视频、帮我生成一个视频、创建视频等）
- 其他情况：使用普通文本回复
重要提示：
- 只有当用户明确表达生成图片或视频的意图时，才调用工具
- 如果用户只是询问"什么是图片生成"，不要调用工具，而是用文本解释
- 如果用户说"我想看看图片"，不要调用工具，而是询问用户想看什么图片`
工具使用示例：
用户: "帮我生成一张图，内容是一只小猫"
→ 调用 generateImage({ prompt: "一只小猫" })
用户: "做一个视频，展示日出"
→ 调用 generateVideo({ prompt: "日出" })
用户: "什么是图片生成？"
→ 不调用工具，用文本解释图片生成的概念
用户: "你好"
→ 不调用工具，普通问候回复
现在，根据用户的输入，决定是否需要调用工具。
```

这个提示词使用了 [《第 04 讲 | 提示词工程：你缺的不只是专业术语》](https://xiaobot.net/post/bd418ad4-eca8-4ce1-a377-3d9a3fcedbf8) 里提到的 Few Shot。**如果是大型的 Agent 系统，可能会有非常多的工具，这个时候就需要用到我们前面学习的提示词技能。**

## 六、部署与测试

代码写完了，接下来把项目跑起来测试一下。

> [如果你想先看效果，可以下载这个代码：https://github.com/shixinzhang/AI-TODO](https://github.com/shixinzhang/AI-TODO)

## 6.1 项目依赖配置

首先，确保你的 \`package.json\` 包含 ai 、@ai-sdk/react、@ai-sdk/openai、zod 这些依赖：

```javascript
{
  "name": "multimodal-chat",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@ai-sdk/google": "^3.0.2",
    "@ai-sdk/openai": "^3.0.2",
    "@ai-sdk/react": "^3.0.11",
    "ai": "^6.0.6",
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "zod": "^4.3.5"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.32",
    "tailwindcss": "^3.4.0",
    "typescript": "^5.0.0"
  }
}
```

如果还没有，执行 npm 命令安装依赖:

> \# 安装核心依赖
> 
> npm install ai @ai-sdk/react @ai-sdk/openai
> 
> \# 安装 Next.js 和 React（如果还没有安装）
> 
> npm install next react react-dom
> 
> \# 安装其他必要的依赖
> 
> npm install zod
> 
> \# 安装开发依赖（TypeScript 类型定义）
> 
> npm install -D @types/node @types/react @types/react-dom typescript

## 6.2 环境变量配置

接下来，复制 \`.env.example\` 为 \`.env.local\`，然后填入你的 API Key：

```bash
# DeepSeek API Key（用于文本聊天和图片生成）
# 可以通过 UiUi API 平台获取：https://sg.uiuiapi.com/console/token
DEEPSEEK_API_KEY=your_deepseek_api_key
# 视频生成方式：'doubao' 或 'veo3'（默认 doubao，推荐）
VIDEO_GENERATION_METHOD=doubao
# 豆包 API 配置（通过火山方舟获取）
# 控制台：https://console.volcengine.com/ark
DOUBAO_API_BASE_URL=https://ark.cn-beijing.volces.com
DOUBAO_API_TOKEN=your_doubao_api_token
DOUBAO_VIDEO_MODEL=doubao-seedance-1-5-pro-251215
```

配置好后，执行 \`npm run dev\` 启动项目。

## 七、结语

OK，到这里我们就完成了一个完整的多模态聊天应用。回顾一下我们学到的东西。

核心知识点：

1\. useChat Hook：Vercel AI SDK 提供的聊天管理工具，自动处理消息流、加载状态

2\. Tools 功能：给 AI 装上"手"，让它能调用外部功能（生成图片、视频等）

3\. 意图识别：通过工具描述让 AI 自动判断该用哪个功能

**技术收获：**

-   熟悉使用 AI SDK 开发 AI 项目
    
    -   前端：React + useChat + 流式消息渲染
        
    -   后端：Next.js API Routes + streamText + Tools
        
-   大模型 API 调用：图片用 Nano Banana pro，视频用豆包 Seedance
    

**这个项目可以用来干什么？**

你可以基于这个方案，做出很多有意思的产品：

-   AI 设计助手：用户描述需求，自动生成设计图
    
-   AI 视频创作：用户描述剧本，自动生成视频
    
-   AI 学习助手：可以生成知识图谱、讲解视频
    

这就是多模态的魅力——AI 不再只是"能说会道"，而是真的能"动手干活"。

如果你跟着这篇文章做完了整个项目，恭喜你，你已经掌握了如何开发一个多模态 AI 应用。

下一讲我们会继续深入，学习如何让 AI 具备更强的上下文能力，实现在多轮对话后还能保持记忆。

我们下一讲见！

> 本专栏已开启「合伙人计划」，读者可生成专属的邀请链接或邀请海报。
> 
> 有人通过你的邀请链接或海报付费订阅时，会返现支付金额的 25% 给你，比如支付 298 元 会返现 74.5 元，快去分享给你的好朋友们吧！

💡 有启发

![](https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep8jKdX2LkxL7W86lqfKeHEJoiawz427qXL0prIibmG0Gt8lDo8zHGqdenF0MR9hqHtytdNjic96ibViaw/132)![](https://thirdwx.qlogo.cn/mmopen/vi_32/1xJwuMWRltghibThBy3nyHsXYfbjAYTrVibwLYsI277iaypDB290TDBWZ3gJibxK0XM4umkIgFGkH3aeSVyOZtKJLA/132)![](https://static.xiaobot.net/user-avatar/2026-01-23/103255/34233765f9bcff3cd1c8b5a944e9b505.png)

转型 AI 工程师：重塑你的能力栈与思维

56 读者， 14 内容

![](https://xiaobot.net/img/icon_arrow_right_light.svg)